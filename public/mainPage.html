<!DOCTYPE html>
<html lang="en", style="background-image: linear-gradient(to bottom right, blue, aqua);">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Baywatch</title>
    <link rel="stylesheet" type="text/css" href="\style.css">
    <link rel="icon" type="image/x-icon" href="/baywatch.png">
</head>
<body>
   <h1>Baywatch</h1>

   <nav class="navbar">
    <ul>
        <li><a href="mainPage.html">Main Page</a></li>
        <li><a href="sources.html">Sources</a></li>
        <li><a href="login.html">Login</a></li>
        <li><a href="subscription.html">Subscription Page</a></li>
        <li><a href="additional_info.html">Additional Information</a></li>
        <li><a href="feedback.html">Feedback Page</a></li>
        <li><a href="createAccount.html">Create Account</a></li>
    </ul>

    </nav>
    <main>
        <p id="username"></p>
        <h3>This is the main page</h3>
        <select name="Locations" id="locationList">

        </select>

     <button type="button" onclick="getLocationData()">Select a location</button>
     
     <ul id="locationData">

     </ul>

        <p>Functionality go here</p>
    </main>
       
    <div class="google-map">
        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d1604478.2164325353!2d-76.0978064!3d38.23898895!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x89ba41ae6aa9019b%3A0x8961db5a6cf17a52!2sChesapeake%20Bay!5e0!3m2!1sen!2sus!4v1753065147395!5m2!1sen!2sus" 
          width="800" 
          height="600" 
          style="border:0;" 
          allowfullscreen="" 
          loading="lazy" 
          referrerpolicy="no-referrer-when-downgrade">
        </iframe>
    </div>
    <style>
        .google-map {
            padding-bottom: 50%;
            position: relative;
        }
        .google-map iframe {
            height: 100%;
            width: 100%;
            left: 0;
            top: 0;
            position: absolute;
        }
    </style>

   <script>
        fetch('/main')
        .then(response => response.json())
        .then(data => {
            var locationSelect = document.getElementById('locationList')
            data.forEach(element => {
                var newOption = document.createElement('option')
                newOption.value = element.locationName
                newOption.textContent = element.locationName
                locationSelect.appendChild(newOption)
            })
        })
        function getLocationData(){
            var selectedLocation = document.getElementById('locationList')
            var locationDataList = document.getElementById('locationData')
            var value = selectedLocation.value
            fetch(`/locationData/${value}`)
            .then(response => response.json())
            .then(data => {

                locationDataList.innerHTML = ""

                var node = document.createElement('li')
                var text = document.createTextNode('Animal Life: ' +data[0].animalLife)

                node.appendChild(text)
                locationDataList.appendChild(node)

                node = document.createElement('li')
                text = document.createTextNode('Runoff: ' + data[0].runoff)

                node.appendChild(text)
                locationDataList.appendChild(node)

                node = document.createElement('li')
                text = document.createTextNode('DeadZones: ' + data[0].deadZones)

                node.appendChild(text)
                locationDataList.appendChild(node)

                node = document.createElement('li')
                text = document.createTextNode('Chemical Pollution: ' +data[0].chemicalPollution)

                node.appendChild(text)
                locationDataList.appendChild(node)

                node = document.createElement('li')
                text = document.createTextNode('Climate Change: '+data[0].climateChange)

                node.appendChild(text)
                locationDataList.appendChild(node)

                node = document.createElement('li')
                text = document.createTextNode('Invasive Species: ' + data[0].invasiveSpecies)

                node.appendChild(text)
                locationDataList.appendChild(node)

                node = document.createElement('li')
                text = document.createTextNode('Air Pollution: ' +data[0].airPollution)

                node.appendChild(text)
                locationDataList.appendChild(node)

                node = document.createElement('li')
                text = document.createTextNode('Wastewater: ' +data[0].wastewater)

                node.appendChild(text)
                locationDataList.appendChild(node)

            })
        }
   </script>
</body>
</html>
